import{S as A,E as B,N as E,P as I,A as T,a as C}from"./effect-fade-fdfa342d.js";import{O as K,x as d,A as M,R as n,U as u,T as s,ab as m,c as l,$ as h,S as w,_ as v,X as y,K as P,Y as R,ae as j,V as z,a8 as o,a5 as i}from"./index-670f34ac.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";import{V as x,a as _}from"./VRow-6946a521.js";const F=["href"],L={class:"littleNewsCard d-flex flex-column"},U={class:"img"},Y=["src"],O={class:"text"},X=["href"],$={class:"newsDescription"},q={class:"newsDate"},N="https://newsapi.org/v2/top-headlines",G={__name:"NewsView",setup(H){const V=[B,E,I,T];K();const c=d([]),f=d([]),p="65accbee8cd4429084a77aaa2ab82659",S=async(t,a)=>{console.log("執行get 新聞 ");const e={country:"us",apiKey:p,pageSize:t,page:a};try{const{data:r}=await m.get(N,{params:e});c.value=r.articles,b()}catch(r){console.error("Error fetching news count:",r)}},b=()=>{if(console.log("執行隨機get 3 新聞"),c.value.length<3){console.log("Not enough articles to select from.");return}const t=new Set;for(;t.size<3;){const a=Math.floor(Math.random()*c.value.length);t.add(a)}f.value=[...t].map(a=>c.value[a])},g=d(2),k=async()=>{console.log("執行get  more新聞 ");const t={country:"us",apiKey:p,pageSize:15,page:g.value};try{const{data:a}=await m.get(N,{params:t});c.value.push(...a.articles),g.value++}catch(a){console.error("Error fetching news count:",a)}};return M(async()=>{await S(15,1)}),(t,a)=>(n(),u(x,null,{default:s(()=>[l(_,{class:"h-100",cols:"12"},{default:s(()=>[l(h(A),{spaceBetween:30,effect:"fade",navigation:!0,pagination:{clickable:!0},modules:V,loop:!0,autoplay:{delay:3e3},class:"mySwiper"},{default:s(()=>[(n(!0),w(y,null,v(f.value,(e,r)=>(n(),u(h(C),{key:r},{default:s(()=>[l(j,{class:"newsCard"},{default:s(()=>[l(z,{"max-height":"90vh",src:e.urlToImage,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{default:s(()=>[o("a",{href:e.url,class:"newTitle"},i(e.title),9,F)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(x,{class:"d-flex justify-center"},{default:s(()=>[(n(!0),w(y,null,v(c.value,(e,r)=>(n(),u(_,{cols:"12",sm:"6",md:"4",class:"d-flex justify-center",key:r},{default:s(()=>[o("div",L,[o("div",U,[o("img",{src:e.urlToImage,alt:""},null,8,Y)]),o("div",O,[o("a",{href:e.url,class:"littleNewsTitle"},i(e.title),9,X),o("p",$,i(e.description),1),o("p",q,i(e.publishedAt.substring(0,10)),1)])])]),_:2},1024))),128)),l(_,{cols:"12",class:"d-flex justify-center"},{default:s(()=>[l(P,{onClick:k},{default:s(()=>[R("More News")]),_:1})]),_:1})]),_:1})]),_:1}))}},ee=D(G,[["__scopeId","data-v-a2edaa1f"]]);export{ee as default};
