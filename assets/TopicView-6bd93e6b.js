import{p as Te,ak as De,al as Ie,am as Fe,an as Ae,ao as Pe,g as Re,ap as Le,x as D,s as $,D as le,o as V,aq as Me,ar as Ee,as as Be,at as j,z,au as Ne,av as Ue,aw as ne,u as Ke,af as oe,c as n,Y as E,ax as Oe,H,a4 as $e,a1 as ue,ay as je,az as ze,a2 as se,aA as He,r as qe,Z as J,aB as We,aC as Ye,aD as Ze,aE as Ge,a5 as Je,L as Qe,P as Xe,O as ea,S as Z,W as ie,U as k,T as aa,$ as ta,ad as la,V as na,ab as Q,a6 as ce,ae as oa,ag as ua,K as sa,ai as ia,aj as ca}from"./index-5ef22765.js";import{u as ra}from"./conversations-c2ef3554.js";import{_ as va}from"./_plugin-vue_export-helper-c27b6911.js";import{V as da}from"./VContainer-9f0dd1f1.js";import{a as G,V as fa}from"./VRow-a3a9bb8c.js";import"./index-06655b42.js";function ma(e,v,g){if(v==null)return e;if(Array.isArray(v))throw new Error("Multiple matches is not implemented");return typeof v=="number"&&~v?n(E,null,[n("span",{class:"v-combobox__unmask"},[e.substr(0,v)]),n("span",{class:"v-combobox__mask"},[e.substr(v,g)]),n("span",{class:"v-combobox__unmask"},[e.substr(v+g)])]):e}const pa=Te({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...De({filterKeys:["title"]}),...Ie({hideNoData:!0,returnObject:!0}),...Fe(Ae({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Pe({transition:!1})},"VCombobox"),ha=Re()({name:"VCombobox",props:pa(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,v){var ee;let{emit:g,slots:t}=v;const{t:B}=Le(),b=D(),m=$(!1),y=$(!0),R=D(!1),w=D(),L=le(e,"menu"),s=V({get:()=>L.value,set:a=>{var u;L.value&&!a&&((u=w.value)!=null&&u.ΨopenChildren)||(L.value=a)}}),o=$(-1);let x=!1;const _=V(()=>{var a;return(a=b.value)==null?void 0:a.color}),{items:N,transformIn:ve,transformOut:de}=Me(e),{textColorClasses:fe,textColorStyles:me}=Ee(_),r=le(e,"modelValue",[],a=>ve(Ze(a)),a=>{const u=de(a);return e.multiple?u:u[0]??null}),A=Be(),P=$(e.multiple?"":((ee=r.value[0])==null?void 0:ee.title)??""),c=V({get:()=>P.value,set:a=>{var u;if(P.value=a,e.multiple||(r.value=[j(e,a)]),a&&e.multiple&&((u=e.delimiters)!=null&&u.length)){const i=a.split(new RegExp(`(?:${e.delimiters.join("|")})+`));i.length>1&&(i.forEach(p=>{p=p.trim(),p&&T(j(e,p))}),P.value="")}a||(o.value=-1),y.value=!a}});z(P,a=>{x?ne(()=>x=!1):m.value&&!s.value&&(s.value=!0),g("update:search",a)}),z(r,a=>{var u;e.multiple||(P.value=((u=a[0])==null?void 0:u.title)??"")});const{filteredItems:M,getMatches:pe}=Ne(e,N,()=>y.value?"":c.value),S=V(()=>r.value.map(a=>N.value.find(u=>e.valueComparator(u.value,a.value))||a)),I=V(()=>e.hideSelected?M.value.filter(a=>!S.value.some(u=>u.value===a.value)):M.value),q=V(()=>S.value.map(a=>a.props.value)),X=V(()=>S.value[o.value]),U=V(()=>{var u;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&c.value===((u=I.value[0])==null?void 0:u.title))&&I.value.length>0&&!y.value&&!R.value}),W=V(()=>e.hideNoData&&!N.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),Y=D(),{onListScroll:he,onListKeydown:ge}=Ue(Y,b);function be(a){x=!0,e.openOnClear&&(s.value=!0)}function ye(){W.value||(s.value=!0)}function xe(a){W.value||(m.value&&(a.preventDefault(),a.stopPropagation()),s.value=!s.value)}function _e(a){var p;if(e.readonly||A!=null&&A.isReadonly.value)return;const u=b.value.selectionStart,i=q.value.length;if((o.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(s.value=!0),["Escape"].includes(a.key)&&(s.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(U.value&&["Enter","Tab"].includes(a.key)&&T(M.value[0]),y.value=!0),a.key==="ArrowDown"&&U.value&&((p=Y.value)==null||p.focus("next")),!!e.multiple){if(["Backspace","Delete"].includes(a.key)){if(o.value<0){a.key==="Backspace"&&!c.value&&(o.value=i-1);return}const l=o.value;X.value&&T(X.value),o.value=l>=i-1?i-2:l}if(a.key==="ArrowLeft"){if(o.value<0&&u>0)return;const l=o.value>-1?o.value-1:i-1;S.value[l]?o.value=l:(o.value=-1,b.value.setSelectionRange(c.value.length,c.value.length))}if(a.key==="ArrowRight"){if(o.value<0)return;const l=o.value+1;S.value[l]?o.value=l:(o.value=-1,b.value.setSelectionRange(0,0))}a.key==="Enter"&&c.value&&(T(j(e,c.value)),c.value="")}}function Ve(){var a;m.value&&(y.value=!0,(a=b.value)==null||a.focus())}function T(a){if(e.multiple){const u=q.value.findIndex(i=>e.valueComparator(i,a.value));if(u===-1)r.value=[...r.value,a];else{const i=[...r.value];i.splice(u,1),r.value=i}c.value=""}else r.value=[a],P.value=a.title,ne(()=>{s.value=!1,y.value=!0})}function Ce(a){m.value=!0,setTimeout(()=>{R.value=!0})}function ke(a){R.value=!1}function we(a){(a==null||a===""&&!e.multiple)&&(r.value=[])}return z(M,a=>{!a.length&&e.hideNoData&&(s.value=!1)}),z(m,(a,u)=>{a||a===u||(o.value=-1,s.value=!1,U.value&&!R.value&&!S.value.some(i=>{let{value:p}=i;return p===I.value[0].value})?T(I.value[0]):e.multiple&&c.value&&(r.value=[...r.value,j(e,c.value)],c.value=""))}),Ke(()=>{const a=!!(e.chips||t.chip),u=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),i=r.value.length>0,[p]=oe.filterProps(e);return n(oe,H({ref:b},p,{modelValue:c.value,"onUpdate:modelValue":[l=>c.value=l,we],focused:m.value,"onUpdate:focused":l=>m.value=l,validationValue:r.externalValue,dirty:i,class:["v-combobox",{"v-combobox--active-menu":s.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!t.selection,"v-combobox--selecting-index":o.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:i?void 0:e.placeholder,"onClick:clear":be,"onMousedown:control":ye,onKeydown:_e}),{...t,default:()=>n(E,null,[n(Oe,H({ref:w,modelValue:s.value,"onUpdate:modelValue":l=>s.value=l,activator:"parent",contentClass:"v-combobox__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Ve},e.menuProps),{default:()=>[u&&n($e,{ref:Y,selected:q.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:l=>l.preventDefault(),onKeydown:ge,onFocusin:Ce,onFocusout:ke,onScrollPassive:he,tabindex:"-1"},{default:()=>{var l,h,C;return[(l=t["prepend-item"])==null?void 0:l.call(t),!I.value.length&&!e.hideNoData&&(((h=t["no-data"])==null?void 0:h.call(t))??n(ue,{title:B(e.noDataText)},null)),n(je,{renderless:!0,items:I.value},{default:F=>{var te;let{item:d,index:f,itemRef:Se}=F;const ae=H(d.props,{ref:Se,key:f,active:U.value&&f===0?!0:void 0,onClick:()=>T(d)});return((te=t.item)==null?void 0:te.call(t,{item:d,index:f,props:ae}))??n(ue,ae,{prepend:K=>{let{isSelected:O}=K;return n(E,null,[e.multiple&&!e.hideSelected?n(ze,{key:d.value,modelValue:O,ripple:!1,tabindex:"-1"},null):void 0,d.props.prependIcon&&n(se,{icon:d.props.prependIcon},null)])},title:()=>{var K,O;return y.value?d.title:ma(d.title,(K=pe(d))==null?void 0:K.title,((O=c.value)==null?void 0:O.length)??0)}})}}),(C=t["append-item"])==null?void 0:C.call(t)]}})]}),S.value.map((l,h)=>{var d;function C(f){f.stopPropagation(),f.preventDefault(),T(l)}const F={"onClick:close":C,onMousedown(f){f.preventDefault(),f.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return n("div",{key:l.value,class:["v-combobox__selection",h===o.value&&["v-combobox__selection--selected",fe.value]],style:h===o.value?me.value:{}},[a?t.chip?n(qe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:l.title}}},{default:()=>{var f;return[(f=t.chip)==null?void 0:f.call(t,{item:l,index:h,props:F})]}}):n(He,H({key:"chip",closable:e.closableChips,size:"small",text:l.title},F),null):((d=t.selection)==null?void 0:d.call(t,{item:l,index:h}))??n("span",{class:"v-combobox__selection-text"},[l.title,e.multiple&&h<S.value.length-1&&n("span",{class:"v-combobox__selection-comma"},[J(",")])])])})]),"append-inner":function(){var F;for(var l=arguments.length,h=new Array(l),C=0;C<l;C++)h[C]=arguments[C];return n(E,null,[(F=t["append-inner"])==null?void 0:F.call(t,...h),(!e.hideNoData||e.items.length)&&e.menuIcon?n(se,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:xe,onClick:We},null):void 0])}})}),Ye({isFocused:m,isPristine:y,menu:s,search:c,selectionIndex:o,filteredItems:M,select:T},b)}}),ga=Ge("topics",()=>{const e=D("");return{topicsArray:e,getTopics:async()=>{try{console.log("pinia get Topics");const{data:g}=await Je.get("/prompts");e.value=g.result}catch(g){console.log("pinia get Topics 失敗"),console.log(g)}}}});const re=e=>(ia("data-v-553bc9ca"),e=e(),ca(),e),ba=re(()=>Q("h1",null,"在這裡你可以盡情地與AI暢談!",-1)),ya=re(()=>Q("h2",{class:"text-center"}," 選擇您想要與AI對談的主題，點擊Let's talk開始對話! ",-1)),xa={class:"category"},_a={__name:"TopicView",setup(e){const v=Qe(),g=Xe(),t=ga(),{topicsArray:B}=ea(t),b=ra();let m=D();const y=D(["全部話題","情境話題","日常話題","興趣話題","旅遊話題","職場話題","考試口說"]);(async()=>{var o;try{t.getTopics(),console.log("前端話題頁面，成功獲得get prompt到前端")}catch(x){g({text:((o=x.response)==null?void 0:o.data.message)||"發生錯誤",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}})();const w=D(null),L=V(()=>!w.value||w.value==="全部話題"?B.value:B.value.filter(o=>o.category===w.value)),s=async(o,x)=>{m.value=await b.createConversation(o,x),console.log("即將跳轉是conversation path"),v.push("/conversation/"+m.value._id)};return(o,x)=>(Z(),ie(da,null,{default:k(()=>[n(fa,null,{default:k(()=>[n(G,{cols:"12",class:"text-center"},{default:k(()=>[ba]),_:1}),n(G,{cols:"12"},{default:k(()=>[n(ha,{label:"過濾口說主題",items:y.value,modelValue:w.value,"onUpdate:modelValue":x[0]||(x[0]=_=>w.value=_),variant:"underlined"},null,8,["items","modelValue"]),ya]),_:1}),(Z(!0),aa(E,null,ta(L.value,_=>(Z(),ie(G,{key:_._id,cols:"12",sm:"6",md:"4"},{default:k(()=>[n(la,{class:"card"},{default:k(()=>[n(na,{src:_.image,height:"200px",cover:""},null,8,["src"]),Q("span",xa,ce(_.category),1),n(oa,{class:"text-center topic-tittle"},{default:k(()=>[J(ce(_.topic),1)]),_:2},1024),n(ua,{class:"d-flex justify-center"},{default:k(()=>[n(sa,{onClick:N=>s(_.topic,_.content)},{default:k(()=>[J("Let's talk")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))}},Da=va(_a,[["__scopeId","data-v-553bc9ca"]]);export{Da as default};
