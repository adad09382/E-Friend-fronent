import{aQ as y,aR as M,a0 as C,t as x,aS as A,aT as D,x as u,s as F,z as v,o as U,aU as b,A as j}from"./index-5ef22765.js";function k(e){return y()?(M(e),!0):!1}function g(e){return typeof e=="function"?e():C(e)}const z=typeof window<"u",B=()=>{};function I(...e){if(e.length!==1)return x(...e);const o=e[0];return typeof o=="function"?A(D(()=>({get:o,set:B}))):u(o)}const L=z?window:void 0;function O(){const e=u(!1);return b()&&j(()=>{e.value=!0}),e}function Q(e){const o=O();return U(()=>(o.value,!!e()))}function V(e={}){const{interimResults:o=!0,continuous:w=!0,window:i=L}=e,r=I(e.lang||"en-US"),t=u(!1),c=u(!1),f=u(""),l=F(void 0),R=(s=!t.value)=>{t.value=s},S=()=>{t.value=!0},m=()=>{t.value=!1},p=i&&(i.SpeechRecognition||i.webkitSpeechRecognition),d=Q(()=>p);let n;return d.value&&(n=new p,n.continuous=w,n.interimResults=o,n.lang=g(r),n.onstart=()=>{c.value=!1},v(r,s=>{n&&!t.value&&(n.lang=s)}),n.onresult=s=>{const h=Array.from(s.results).map(a=>(c.value=a.isFinal,a[0])).map(a=>a.transcript).join("");f.value=h,l.value=void 0},n.onerror=s=>{l.value=s},n.onend=()=>{t.value=!1,n.lang=g(r)},v(t,()=>{t.value?n.start():n.stop()})),k(()=>{t.value=!1}),{isSupported:d,isListening:t,isFinal:c,recognition:n,result:f,error:l,toggle:R,start:S,stop:m}}export{V as u};
