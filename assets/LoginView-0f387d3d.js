import{O as w,L as x,M as h,aa as S,R as k,U as B,T as s,c as a,ac as C,$ as o,ad as y,ag as c,a8 as p,K as F,Y as L}from"./index-39745ca7.js";import{c as M,a as i,u as U,d}from"./index.esm-a8b91563.js";import{V as N}from"./VContainer-966382c0.js";import{a as m,V as R}from"./VRow-ae190be0.js";import{V as T}from"./VForm-9f183e76.js";import"./_commonjsHelpers-39b5b250.js";const $=p("h1",null,"登入",-1),q={class:"text-center"},A={__name:"LoginView",setup(P){const u=w(),V=x(),f=h(),g=M({account:i().required("帳號必填").min(4,"最少4個字").max(20,"最多20個字"),password:i().required("密碼必填").min(4,"最少4個字").max(20,"最多20個字")}),{handleSubmit:b,isSubmitting:_}=U({validationSchema:g}),t=d("account"),r=d("password"),v=b(async l=>{try{const{data:e}=await S.post("/users/login",{account:l.account,password:l.password});f.login(e),u({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/")}catch(e){console.log(e),u({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(l,e)=>(k(),B(N,null,{default:s(()=>[a(R,null,{default:s(()=>[a(m,{cols:"12"},{default:s(()=>[$]),_:1}),a(C),a(m,{cols:"12"},{default:s(()=>[a(T,{disabled:o(_),onSubmit:y(o(v),["prevent"])},{default:s(()=>[a(c,{modelValue:o(t).value.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o(t).value.value=n),"error-messages":o(t).errorMessage.value,label:"帳號",counter:"",maxLength:"20"},null,8,["modelValue","error-messages"]),a(c,{modelValue:o(r).value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o(r).value.value=n),"error-messages":o(r).errorMessage.value,label:"密碼",counter:"",maxLength:"20",type:"password"},null,8,["modelValue","error-messages"]),p("div",q,[a(F,{type:"submit",color:"green"},{default:s(()=>[L("登入")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{A as default};
