import{P as w,L as x,N as h,a8 as S,S as k,W as B,U as s,c as a,aa as C,a0 as o,ac as y,af as c,ab as p,K as F,Z as L}from"./index-5ef22765.js";import{c as N,a as i,u as U,d as m}from"./index.esm-8b326ff9.js";import{V as M}from"./VContainer-9f0dd1f1.js";import{a as d,V as P}from"./VRow-a3a9bb8c.js";import{V as q}from"./VForm-27902817.js";import"./_commonjsHelpers-39b5b250.js";const R=p("h1",null,"登入",-1),T={class:"text-center"},A={__name:"LoginView",setup($){const u=w(),V=x(),f=h(),b=N({account:i().required("帳號必填").min(4,"最少4個字").max(20,"最多20個字"),password:i().required("密碼必填").min(4,"最少4個字").max(20,"最多20個字")}),{handleSubmit:g,isSubmitting:_}=U({validationSchema:b}),t=m("account"),r=m("password"),v=g(async l=>{try{const{data:e}=await S.post("/users/login",{account:l.account,password:l.password});f.login(e),u({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),V.push("/")}catch(e){console.log(e),u({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(l,e)=>(k(),B(M,null,{default:s(()=>[a(P,null,{default:s(()=>[a(d,{cols:"12"},{default:s(()=>[R]),_:1}),a(C),a(d,{cols:"12"},{default:s(()=>[a(q,{disabled:o(_),onSubmit:y(o(v),["prevent"])},{default:s(()=>[a(c,{modelValue:o(t).value.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o(t).value.value=n),"error-messages":o(t).errorMessage.value,label:"帳號",counter:"",maxLength:"20"},null,8,["modelValue","error-messages"]),a(c,{modelValue:o(r).value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o(r).value.value=n),"error-messages":o(r).errorMessage.value,label:"密碼",counter:"",maxLength:"20",type:"password"},null,8,["modelValue","error-messages"]),p("div",T,[a(F,{type:"submit",color:"green"},{default:s(()=>[L("登入")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}))}};export{A as default};
