import{S as b,E as S,N as k,P as A,A as B,a as C}from"./effect-fade-bb74b615.js";import{O as I,x as m,A as T,aa as p,R as c,U as d,T as s,c as o,$ as g,S as h,_ as w,X as v,K as M,Y as j,ae as D,V as E,a8 as t,a5 as r}from"./index-aa91f485.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import{V as x,a as u}from"./VRow-a605a6a7.js";const R=["href"],F={class:"littleNewsCard d-flex flex-column"},z={class:"img"},K=["src"],L={class:"text"},O=["href"],U={class:"newsDescription"},X={class:"newsDate"},Y={__name:"NewsView",setup($){const y=[S,k,A,B];I();const l=m([]),_=m([]),N=()=>{if(console.log("執行隨機get 3 新聞"),l.value.length<3){console.log("Not enough articles to select from.");return}const e=new Set;for(;e.size<3;){const n=Math.floor(Math.random()*l.value.length);e.add(n)}_.value=[...e].map(n=>l.value[n])};let f=1;const V=async()=>{console.log("執行get more新聞 ");try{const{data:e}=await p.post("/news",{morePage:f});l.value.push(...e.data.articles),f++}catch(e){console.log("獲得 more 新聞錯誤"),console.log(e)}};return T(async()=>{const{data:e}=await p.get("/news");l.value=e.data.articles,N()}),(e,n)=>(c(),d(x,null,{default:s(()=>[o(u,{class:"h-100",cols:"12"},{default:s(()=>[o(g(b),{spaceBetween:30,effect:"fade",navigation:!0,pagination:{clickable:!0},modules:y,loop:!0,autoplay:{delay:3e3},class:"mySwiper"},{default:s(()=>[(c(!0),h(v,null,w(_.value,(a,i)=>(c(),d(g(C),{key:i},{default:s(()=>[o(D,{class:"newsCard"},{default:s(()=>[o(E,{"max-height":"90vh",src:a.urlToImage,gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",cover:""},{default:s(()=>[t("a",{href:a.url,class:"newTitle"},r(a.title),9,R)]),_:2},1032,["src"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),o(x,{class:"d-flex justify-center"},{default:s(()=>[(c(!0),h(v,null,w(l.value,(a,i)=>(c(),d(u,{cols:"12",sm:"6",md:"4",class:"d-flex justify-center",key:i},{default:s(()=>[t("div",F,[t("div",z,[t("img",{src:a.urlToImage,alt:""},null,8,K)]),t("div",L,[t("a",{href:a.url,class:"littleNewsTitle"},r(a.title),9,O),t("p",U,r(a.description),1),t("p",X,r(a.publishedAt.substring(0,10)),1)])])]),_:2},1024))),128)),o(u,{cols:"12",class:"d-flex justify-center"},{default:s(()=>[o(M,{onClick:V},{default:s(()=>[j("More News")]),_:1})]),_:1})]),_:1})]),_:1}))}},Q=P(Y,[["__scopeId","data-v-bb7fe0c1"]]);export{Q as default};
